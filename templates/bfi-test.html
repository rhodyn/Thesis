<!DOCTYPE html>
<html lang="en">
<head>
    <title>BFI-44 Personality Test</title>
    <style>
        body {
            background-image:url('../static/Images/wallpaper.jpg');
            background-attachment:fixed;
            background-repeat: no-repeat;
            background-size: cover;
            font-family: Roobert,-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .question-card {
            background: black;
            opacity: 0.7;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            max-width: 700px;
            width: 100%;
            text-align: center;
            padding: 100px;
        }
        .slider-container {
            margin: 20px 0;
        }
        .slider-container input[type="range"] {
            width: 100%;
            height: 25px;
        }
        .slider-labels {
            position: relative;
            width: 100%;
            margin-top: 10px;
            height: 20px;
            padding: 0 15px; /* Add padding to prevent clipping */
            box-sizing: border-box;
        }

        .slider-labels span {
            position: absolute;
            transform: translateX(-50%);
            width: max-content;
            font-size: 1em;
            white-space: nowrap;
        }

        .slider-labels span:nth-child(1) { left: 0%; text-align: left; }
        .slider-labels span:nth-child(2) { left: 25%; }
        .slider-labels span:nth-child(3) { left: 50%; }
        .slider-labels span:nth-child(4) { left: 75%; }
        .slider-labels span:nth-child(5) { left: 100%; text-align: right; }

        .navigation-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 60px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: red;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
        }
        button:disabled {
            background-color: #ccc;
        }
        h2, span {
            color: white;
        }
    </style>
</head>
<body>
    <div class="question-card">
        <h2>Personality Type Test</h2>
        <h2 id="question-text"></h2>
        <div class="slider-container">
            <input type="range" min="1" max="5" id="question-range" value="3">
            <div class="slider-labels">
                <span>Strongly Disagree</span>
                <span>Disagree</span>
                <span>Neutral</span>
                <span>Agree</span>
                <span>Strongly Agree</span>
            </div>
        </div>

        <div class="navigation-buttons">
            <button id="back-btn" onclick="previousQuestion()">Back</button>
            <button id="next-btn" onclick="nextQuestion()">Next</button>
        </div>
    </div>

    <script>
        const questions = [
            "I am someone who is talkative.",
            "I am someone who tends to find fault with others.",
            "I am someone who does a thorough job.",
            "I am someone who is depressed.",
            "I am someone who is original, comes up with new ideas.",
            "I am someone who is reserved.",
            "I am someone who is helpful and unselfish with others.",
            "I am someone who can be somewhat careless.",
            "I am someone who is relaxed, handles stress well.",
            "I am someone who is curious about many different things.",
            "I am someone who is full of energy.",
            "I am someone who starts quarrel with others.",
            "I am someone who is a reliable worker.",
            "I am someone who can be tense.",
            "I am someone who is ingenious, deep thinker.",
            "I am someone who generates a lot of enthusiasm.",
            "I am someone who has a forgiving nature.",
            "I am someone who tends to be disorganized.",
            "I am someone who worries a lot.",
            "I am someone who has an active imagination.",
            "I am someone who tends to be quiet.",
            "I am someone who is generally trusting.",
            "I am someone who tends to be lazy.",
            "I am someone who is emotionally stable, not easily upset.",
            "I am someone who is inventive.",
            "I am someone who has an assertive personality.",
            "I am someone who can be cold and aloof.",
            "I am someone who perseveres until the task is finished.",
            "I am someone who can be moody.",
            "I am someone who values artistic.",
            "I am someone who is sometimes shy, inhibited.",
            "I am someone who is considerate and kind to almost.",
            "I am someone who does things efficiently.",
            "I am someone who remains calm in tense situations.",
            "I am someone who prefers work that is routine.",
            "I am someone who is outgoing, sociable.",
            "I am someone who is sometimes rude to others.",
            "I am someone who makes plans and follows through with them.",
            "I am someone who gets nervous easily.",
            "I am someone who likes to reflect, play with ideas.",
            "I am someone who has few artistic interests.",
            "I am someone who likes to cooperate with others.",
            "I am someone who is easily distracted",
            "I am someone who is sophisticated in art, music, or literature"
        ];

        const answers = new Array(44).fill(3);
        let currentIndex = 0;

        function updateQuestion() {
            document.getElementById("question-text").textContent = `${currentIndex + 1}. ${questions[currentIndex]}`;
            document.getElementById("question-range").value = answers[currentIndex];

            document.getElementById("back-btn").disabled = currentIndex === 0;

            const nextBtn = document.getElementById("next-btn");
            nextBtn.textContent = currentIndex === questions.length - 1 ? "Submit" : "Next";
        }

        function previousQuestion() {
            if (currentIndex > 0) {
                answers[currentIndex] = parseInt(document.getElementById("question-range").value);
                currentIndex--;
                updateQuestion();
            }
        }

        function nextQuestion() {
            answers[currentIndex] = parseInt(document.getElementById("question-range").value);

            if (currentIndex === questions.length - 1) {
                submitBFI();
            } else {
                currentIndex++;
                updateQuestion();
            }
        }

        function submitBFI() {
            const traits = {
                O: [5, 10, 15, 20, 25, 30, 35, 40, 44],
                C: [3, 8, 13, 18, 23, 28, 33, 38, 43],
                E: [1, 6, 11, 16, 21, 26, 31, 36],
                A: [2, 7, 12, 17, 22, 27, 32, 37, 42],
                N: [4, 9, 14, 19, 24, 29, 34, 39, 41]
            };

            const reversed = [6, 21, 31, 2, 12, 27, 37, 9, 19, 29, 41, 8, 18, 23, 43];
            const scores = { O: 0, C: 0, E: 0, A: 0, N: 0 };

            for (let trait in traits) {
                traits[trait].forEach(q => {
                    let val = answers[q - 1];
                    if (reversed.includes(q)) val = 6 - val;
                    scores[trait] += val;
                });
            }

            const resultArray = [scores.O, scores.C, scores.E, scores.A, scores.N];

            const form = document.createElement("form");
            form.method = "POST";
            form.action = "/personality_test";

            const input = document.createElement("input");
            input.type = "hidden";
            input.name = "bfi_scores";
            input.value = JSON.stringify(resultArray);
            form.appendChild(input);

            document.body.appendChild(form);
            form.submit();
        }

        // Loads first question
        updateQuestion();
    </script>
</body>
</html>
